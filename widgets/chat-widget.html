<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI Chat Widget</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    .ai-chat-widget {
      --widget-primary: #10a37f;
      --widget-bg: #1a1a1a;
      --widget-text: #ffffff;
      --widget-muted: #737373;
      --widget-border: #2a2a2a;
      --widget-user-bg: #10a37f;
      --widget-ai-bg: #1a1a1a;
    }

    .ai-chat-widget-container {
      position: fixed;
      bottom: 20px;
      right: 20px;
      z-index: 999999;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    }

    .ai-chat-toggle {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background: var(--widget-primary);
      border: none;
      cursor: pointer;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
      display: flex;
      align-items: center;
      justify-content: center;
      transition: transform 0.3s ease;
    }

    .ai-chat-toggle:hover {
      transform: scale(1.1);
    }

    .ai-chat-toggle svg {
      width: 28px;
      height: 28px;
      fill: white;
    }

    .ai-chat-window {
      position: absolute;
      bottom: 80px;
      right: 0;
      width: 380px;
      height: 500px;
      background: var(--widget-bg);
      border-radius: 16px;
      box-shadow: 0 8px 40px rgba(0, 0, 0, 0.4);
      display: none;
      flex-direction: column;
      overflow: hidden;
      border: 1px solid var(--widget-border);
    }

    .ai-chat-window.open {
      display: flex;
    }

    .ai-chat-header {
      padding: 16px 20px;
      border-bottom: 1px solid var(--widget-border);
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: #0d0d0d;
    }

    .ai-chat-header-left {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .ai-chat-avatar {
      width: 40px;
      height: 40px;
      border-radius: 12px;
      background: linear-gradient(135deg, #10a37f, #0d8a6a);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .ai-chat-avatar svg {
      width: 24px;
      height: 24px;
      fill: white;
    }

    .ai-chat-title {
      color: var(--widget-text);
      font-size: 15px;
      font-weight: 600;
    }

    .ai-chat-status {
      color: var(--widget-muted);
      font-size: 12px;
      display: flex;
      align-items: center;
      gap: 6px;
      margin-top: 2px;
    }

    .ai-chat-status-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: #22c55e;
    }

    .ai-chat-close {
      width: 36px;
      height: 36px;
      border-radius: 8px;
      background: transparent;
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background 0.2s;
    }

    .ai-chat-close:hover {
      background: var(--widget-border);
    }

    .ai-chat-close svg {
      width: 20px;
      height: 20px;
      fill: var(--widget-muted);
    }

    .ai-chat-messages {
      flex: 1;
      overflow-y: auto;
      padding: 20px;
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .ai-chat-message {
      display: flex;
      flex-direction: column;
      max-width: 85%;
      animation: fadeIn 0.3s ease;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .ai-chat-message.user {
      align-self: flex-end;
    }

    .ai-chat-message.ai {
      align-self: flex-start;
    }

    .ai-chat-message-content {
      padding: 12px 16px;
      border-radius: 16px;
      font-size: 14px;
      line-height: 1.5;
    }

    .ai-chat-message.user .ai-chat-message-content {
      background: var(--widget-user-bg);
      color: white;
      border-bottom-right-radius: 4px;
    }

    .ai-chat-message.ai .ai-chat-message-content {
      background: var(--widget-ai-bg);
      color: var(--widget-text);
      border: 1px solid var(--widget-border);
      border-bottom-left-radius: 4px;
    }

    .ai-chat-message-meta {
      font-size: 11px;
      color: var(--widget-muted);
      margin-top: 6px;
      padding: 0 4px;
    }

    .ai-chat-message.user .ai-chat-message-meta {
      text-align: right;
    }

    .ai-chat-typing {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 12px 16px;
      background: var(--widget-ai-bg);
      border: 1px solid var(--widget-border);
      border-radius: 16px;
      border-bottom-left-radius: 4px;
      max-width: 85%;
      align-self: flex-start;
    }

    .ai-chat-typing-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: var(--widget-muted);
      animation: typing 1.4s infinite;
    }

    .ai-chat-typing-dot:nth-child(2) {
      animation-delay: 0.2s;
    }

    .ai-chat-typing-dot:nth-child(3) {
      animation-delay: 0.4s;
    }

    @keyframes typing {
      0%, 60%, 100% {
        transform: translateY(0);
      }
      30% {
        transform: translateY(-4px);
      }
    }

    .ai-chat-input-container {
      padding: 16px 20px;
      border-top: 1px solid var(--widget-border);
      background: #0d0d0d;
    }

    .ai-chat-input-wrapper {
      display: flex;
      align-items: flex-end;
      gap: 10px;
      background: var(--widget-bg);
      border: 1px solid var(--widget-border);
      border-radius: 12px;
      padding: 4px 4px 4px 16px;
      transition: border-color 0.2s;
    }

    .ai-chat-input-wrapper:focus-within {
      border-color: var(--widget-primary);
    }

    .ai-chat-input {
      flex: 1;
      background: transparent;
      border: none;
      outline: none;
      color: var(--widget-text);
      font-size: 14px;
      resize: none;
      max-height: 120px;
      min-height: 44px;
      line-height: 1.5;
      padding: 12px 0;
    }

    .ai-chat-input::placeholder {
      color: var(--widget-muted);
    }

    .ai-chat-send {
      width: 40px;
      height: 40px;
      border-radius: 10px;
      background: var(--widget-primary);
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: opacity 0.2s;
      flex-shrink: 0;
    }

    .ai-chat-send:hover {
      opacity: 0.9;
    }

    .ai-chat-send:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .ai-chat-send svg {
      width: 18px;
      height: 18px;
      fill: white;
    }

    .ai-chat-welcome {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 40px 20px;
      text-align: center;
    }

    .ai-chat-welcome-icon {
      width: 64px;
      height: 64px;
      border-radius: 16px;
      background: linear-gradient(135deg, #10a37f, #0d8a6a);
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 20px;
    }

    .ai-chat-welcome-icon svg {
      width: 32px;
      height: 32px;
      fill: white;
    }

    .ai-chat-welcome h2 {
      color: var(--widget-text);
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 8px;
    }

    .ai-chat-welcome p {
      color: var(--widget-muted);
      font-size: 13px;
      line-height: 1.5;
      max-width: 280px;
    }

    /* Scrollbar styling */
    .ai-chat-messages::-webkit-scrollbar {
      width: 6px;
    }

    .ai-chat-messages::-webkit-scrollbar-track {
      background: transparent;
    }

    .ai-chat-messages::-webkit-scrollbar-thumb {
      background: var(--widget-border);
      border-radius: 3px;
    }

    .ai-chat-messages::-webkit-scrollbar-thumb:hover {
      background: #3a3a3a;
    }

    /* Responsive */
    @media (max-width: 420px) {
      .ai-chat-window {
        width: calc(100vw - 40px);
        right: -10px;
      }
    }
  </style>
</head>
<body>
  <div class="ai-chat-widget-container">
    <div class="ai-chat-window" id="aiChatWindow">
      <div class="ai-chat-header">
        <div class="ai-chat-header-left">
          <div class="ai-chat-avatar">
            <svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/></svg>
          </div>
          <div>
            <div class="ai-chat-title">AI Assistant</div>
            <div class="ai-chat-status">
              <span class="ai-chat-status-dot"></span>
              Online
            </div>
          </div>
        </div>
        <button class="ai-chat-close" id="aiChatClose">
          <svg viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </div>
      
      <div class="ai-chat-messages" id="aiChatMessages">
        <div class="ai-chat-welcome" id="aiChatWelcome">
          <div class="ai-chat-welcome-icon">
            <svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/></svg>
          </div>
          <h2>How can I help you?</h2>
          <p>Ask me anything and I'll do my best to assist you.</p>
        </div>
      </div>
      
      <div class="ai-chat-typing" id="aiChatTyping" style="display: none;">
        <div class="ai-chat-typing-dot"></div>
        <div class="ai-chat-typing-dot"></div>
        <div class="ai-chat-typing-dot"></div>
      </div>
      
      <div class="ai-chat-input-container">
        <div class="ai-chat-input-wrapper">
          <textarea 
            class="ai-chat-input" 
            id="aiChatInput" 
            placeholder="Type your message..."
            rows="1"
          ></textarea>
          <button class="ai-chat-send" id="aiChatSend" disabled>
            <svg viewBox="0 0 24 24"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/></svg>
          </button>
        </div>
      </div>
    </div>
    
    <button class="ai-chat-toggle" id="aiChatToggle" aria-label="Open chat">
      <svg viewBox="0 0 24 24"><path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z"/></svg>
    </button>
  </div>

  <script>
    (function() {
      const widgetId = 'aiChatWidget';
      let isOpen = false;
      let messages = [];
      let isTyping = false;

      const windowEl = document.getElementById('aiChatWindow');
      const toggleEl = document.getElementById('aiChatToggle');
      const closeEl = document.getElementById('aiChatClose');
      const messagesEl = document.getElementById('aiChatMessages');
      const welcomeEl = document.getElementById('aiChatWelcome');
      const typingEl = document.getElementById('aiChatTyping');
      const inputEl = document.getElementById('aiChatInput');
      const sendEl = document.getElementById('aiChatSend');

      function toggleChat() {
        isOpen = !isOpen;
        windowEl.classList.toggle('open', isOpen);
        
        if (isOpen && messages.length === 0) {
          welcomeEl.style.display = 'flex';
        } else {
          welcomeEl.style.display = 'none';
        }
      }

      function closeChat() {
        isOpen = false;
        windowEl.classList.remove('open');
      }

      function getCurrentTime() {
        return new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
      }

      function addMessage(content, role) {
        const message = {
          id: Date.now(),
          content,
          role,
          timestamp: getCurrentTime()
        };
        messages.push(message);
        
        if (messages.length === 1) {
          welcomeEl.style.display = 'none';
        }

        const messageEl = document.createElement('div');
        messageEl.className = `ai-chat-message ${role}`;
        messageEl.innerHTML = `
          <div class="ai-chat-message-content">${escapeHtml(content)}</div>
          <div class="ai-chat-message-meta">${message.timestamp}</div>
        `;
        messagesEl.appendChild(messageEl);
        messagesEl.scrollTop = messagesEl.scrollHeight;
      }

      function escapeHtml(text) {
        const div = document.createElement('div');
        div.textContent = text;
        return div.innerHTML;
      }

      function showTyping() {
        isTyping = true;
        typingEl.style.display = 'flex';
        messagesEl.scrollTop = messagesEl.scrollHeight;
      }

      function hideTyping() {
        isTyping = false;
        typingEl.style.display = 'none';
      }

      function simulateAIResponse(userMessage) {
        showTyping();
        
        setTimeout(() => {
          hideTyping();
          
          const responses = [
            "That's a great question! Let me help you with that.",
            "I understand what you're asking. Here's what I can tell you...",
            "Thanks for reaching out! I'm here to help with your inquiry.",
            "I'd be happy to assist you with that. Let me provide some information.",
            "Interesting question! Let me think about that for a moment.",
          ];
          
          const randomResponse = responses[Math.floor(Math.random() * responses.length)];
          addMessage(`${randomResponse}\n\nYou asked: "${userMessage}"\n\nThis is a placeholder response. In production, this would connect to your AI API endpoint.`, 'ai');
        }, 1500);
      }

      function handleSend() {
        const content = inputEl.value.trim();
        if (!content || isTyping) return;
        
        addMessage(content, 'user');
        inputEl.value = '';
        sendEl.disabled = true;
        
        simulateAIResponse(content);
      }

      function handleInput() {
        sendEl.disabled = !inputEl.value.trim();
        
        // Auto-resize
        inputEl.style.height = 'auto';
        inputEl.style.height = Math.min(inputEl.scrollHeight, 120) + 'px';
      }

      function handleKeyDown(e) {
        if (e.key === 'Enter' && !e.shiftKey) {
          e.preventDefault();
          if (inputEl.value.trim()) {
            handleSend();
          }
        }
      }

      toggleEl.addEventListener('click', toggleChat);
      closeEl.addEventListener('click', closeChat);
      sendEl.addEventListener('click', handleSend);
      inputEl.addEventListener('input', handleInput);
      inputEl.addEventListener('keydown', handleKeyDown);

      // Initialize
      sendEl.disabled = true;
    })();
  </script>
</body>
</html>
